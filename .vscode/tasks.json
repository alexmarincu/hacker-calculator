{
    "version": "2.0.0",
    "type": "shell",
    "presentation": {
        "panel": "new"
    },
    "options": {
        "cwd": "${workspaceFolder}"
    },
    "problemMatcher": [],
    "tasks": [
        {
            "label": "App: Run",
            "command": "${command:python.interpreterPath} app/main.py",
            "group": "build"
        },
        {
            "label": "App: Build",
            "linux": {
                "command": [
                    ". .pyvenv/bin/activate",
                    " && flet pack app/main.py",
                    " --name HckrCalc",
                    " --icon app/assets/icon.png",
                    " --add-data 'app/assets:assets'",
                    " --onedir",
                    " && mv dist/HckrCalc/_internal/assets dist/HckrCalc/assets",
                ],
            },
            "windows": {
                "command": [
                    ".pyvenv/Scripts/Activate.ps1",
                    " ; flet pack app/main.py",
                    " --name HckrCalc",
                    " --icon app/assets/icon.png",
                    " --add-data 'app/assets;assets'",
                    " --onedir",
                    " --file-description '${config:appName}'",
                    " --file-version '${config:appVersion}'",
                    " --product-name '${config:appName}'",
                    " --product-version '${config:appVersion}'",
                    " --copyright 'Copyright (c) 2023 Alex Marincu'",
                    "; Move-Item -Path \"dist/HckrCalc/_internal/assets\"",
                    " -Destination \"dist/HckrCalc/assets\""
                ],
            },
            "group": "build"
        },
        {
            "label": "Python venv: Setup",
            "command": "${command:python.interpreterPath} -m venv .pyvenv"
        },
        {
            "label": "Python venv: Activate",
            "linux": {
                "command": ". .pyvenv/bin/activate"
            },
            "windows": {
                "command": ".pyvenv/Scripts/Activate.ps1"
            }
        },
        {
            "label": "Python venv: Install requirements",
            "command": [
                "${command:python.interpreterPath}",
                " -m pip install -r requirements.txt"
            ]
        }
    ]
}